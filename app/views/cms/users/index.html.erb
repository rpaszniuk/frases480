<div class='row page-title-row'>
  <div class='col'>
    <h1>Users List</h1>
  </div>
  <div class='col-auto'>
    <div class='d-table h-100'>
      <div class='d-table-cell align-middle'>
        <%= link_to 'Create New', :new_cms_user, class: 'btn btn-info' %>
      </div>
    </div>
  </div>
</div>
<div class='row'>
  <div class='col-md-12'>
    <div class='card'>
      <div class='card-header'>
        <div class='row'>
          <div class='col-md-3'>
            <label><i class='fa fa-filter'></i> Filter for search</label>
          </div>
        </div>
      </div>
      <div class='card-body'>
        <%= search_form_for @search, html: {class: ''} do |f| %>
          <div class='form-row'>
            <div class='form-group col-md-3'>
              <%= f.text_field :email_or_first_name_or_last_name_cont, 
                  class: 'form-control mb-3 mr-sm-3',
                  placeholder: 'Search by Name'
              %>
            </div>
            <div class='form-group col-md-3'>
              <%= f.submit t('basic.forms.submit_search'), class: 'btn btn-primary mb-2' %>
              <!-- data-disable-with='<%= t('basic.forms.searching') %>'> -->
            </div>
          </div>
        <% end %>
      </div>
    </div>
  </div>
</div>
<div class='row'>
  <div class='col-md-12'>
    <% if !@users.blank? && @users.length > 0 -%>
    <table class='table table-responsive-sm table-striped'>
      <thead>
        <tr>
          <th><%= sort_link @search, :id, '#' %></th>
          <th><%= sort_link @search, :full_name %></th>
          <th><%= sort_link @search, :access_profile_name, t('models.user.access_profile') %></th>
        </tr>
      </thead>
      <tbody>
        <% @users.each do |user| -%>
        <tr>
          <td><%= user.id %></td>
          <td><%= edit_link_to :users, user.full_name, edit_user_path(user) %></td>
          <td><%= edit_link_to(:access_profiles, user.access_profile_name, edit_access_profile_path(user.access_profile)) unless user.access_profile.blank? %></td>
        </tr>
        <% end -%>
      </tbody>
    </table>
    <div class='d-flex justify-content-center'>
      <%= paginate(@users) %>
    </div>
    <% else -%>
    <div class='alert alert-info' role='alert'>No users found.</div>
    <% end -%>
  </div>
</div>
